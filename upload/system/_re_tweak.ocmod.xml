<?xml version="1.0" encoding="utf-8"?>
    <modification>
    <name>[OCN] OpenCart 3 RE Tweak</name>
    <version>3.0.3.6.RE8</version>
    <author>Hkr</author>
    <link>https://forum.opencart.name</link>
    <code>ocn_30_re_tweak</code>
    <date>04.08.2020</date>

<!-- Замена ссылок в меню профиля в админке -->
    <file path="admin/view/template/common/header.twig">
        <operation>
            <search trim="true"><![CDATA[
                <li><a href="http://www.opencart.com" target="_blank"><i class="fa fa-opencart fa-fw"></i> {{ text_homepage }}</a></li>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                <li><a href="http://www.opencart.com" target="_blank"><i class="fa fa-opencart fa-fw"></i> {{ text_homepage }} [EN]</a></li>
                <li><a href="https://opencart.name" target="_blank"><i class="fa fa-opencart fa-fw"></i> {{ text_homepage }} [RU]</a></li>
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                <li><a href="http://docs.opencart.com" target="_blank"><i class="fa fa-file-text-o fa-fw"></i> {{ text_documentation }}</a></li>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                <li><a href="https://docs.opencart.name/ru-ru/introduction/" target="_blank"><i class="fa fa-file-text-o fa-fw"></i> {{ text_documentation }} [RU]</a></li>
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                <li><a href="http://forum.opencart.com" target="_blank"><i class="fa fa-comments-o fa-fw"></i> {{ text_support }}</a></li>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
            <li><a href="https://forum.opencart.name" target="_blank"><i class="fa fa-comments-o fa-fw"></i> {{ text_support }} [RU]</a></li>
            ]]></add>
        </operation>
    </file>
<!--  -->

<!-- Добавление копирайтов в футер -->
    <!-- Разделение языковых фраз для удобства -->
    <file path="admin/language/en-gb/common/footer.php">
        <operation>
            <search trim="true"><![CDATA[
                $_['text_footer']  = '<a href="http://www.opencart.com">OpenCart</a> &copy; 2009-' . date('Y') . ' All Rights Reserved.';
            ]]></search>
            <add position="replace" trim="true" offset="2"><![CDATA[
                $_['text_footer']                      = 'OpenCart';
                $_['text_footer_link']                 = 'https://www.opencart.com';
                $_['text_footer_year']                 = '2009';
                $_['text_footer_copyright_icon']       = '&copy;';
                $_['text_footer_copyright']            = 'All Rights Reserved.';
                $_['text_version']                     = 'Version %s';
                $_['text_version_hidden']              = 'Version opencart';

                // RE
                $_['text_footer_re']                   = 'OpenCart Russian Edition';
                $_['text_footer_link_re']              = 'https://forum.opencart.name';
                $_['text_footer_year_re']              = '&copy; 2020-';
                $_['text_version_re']                  = 'Assembly version';
                $_['text_version_number_re']           = 'RE8';
                $_['text_version_hidden_re']           = 'OpenCart RE';
                $_['text_version_link_re']             = 'https://forum.opencart.name/resources/13/';
                $_['text_version_translate_link_re']   = 'https://forum.opencart.name/resources/9/';
                $_['text_version_translate_re']        = 'Translation version';
                $_['text_version_translate_number_re'] = '3.0.3.6.10';
            ]]></add>
        </operation>
    </file>
    <file path="admin/language/ru-ru/common/footer.php">
        <operation>
            <search trim="true"><![CDATA[
                $_['text_footer']  = '<a href="http://www.opencart.com">OpenCart</a> &copy; 2009-' . date('Y') . ' Все права защищены. <br> <a href="https://forum.opencart.name" target="_blank">ruOpenCart</a> &copy; 2020-' . date('Y') . ' Все права защищены.';
            ]]></search>
            <add position="replace" trim="true" offset="2"><![CDATA[
                $_['text_footer']                      = 'OpenCart';
                $_['text_footer_link']                 = 'https://www.opencart.com';
                $_['text_footer_year']                 = '2009';
                $_['text_footer_copyright_icon']       = '&copy;';
                $_['text_footer_copyright']            = 'Все права защищены.';
                $_['text_version']                     = 'Версия %s';
                $_['text_version_hidden']              = 'Версия opencart';

                // RE
                $_['text_footer_re']                   = 'OpenCart Russian Edition';
                $_['text_footer_link_re']              = 'https://forum.opencart.name';
                $_['text_footer_year_re']              = '2020';
                $_['text_version_re']                  = 'Версия сборки';
                $_['text_version_number_re']           = 'RE8';
                $_['text_version_hidden_re']           = 'Версия OpenCart RE';
                $_['text_version_link_re']             = 'https://forum.opencart.name/resources/13/';
                $_['text_version_translate_link_re']   = 'https://forum.opencart.name/resources/9/';
                $_['text_version_translate_re']        = 'Версия перевода';
                $_['text_version_translate_number_re'] = '3.0.3.6.10';
                $_['text_version_translate_hidden_re'] = 'от opencart.name';
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Добавление языковых фраз в контроллере -->
    <file path="admin/controller/common/footer.php">
        <operation>
            <search trim="true"><![CDATA[
                $data['text_version'] = sprintf($this->language->get('text_version'), VERSION);
            ]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_version_re'] = $this->language->get('text_version_re');
                $data['text_version_re'] .= ' ' . $this->language->get('text_version_number_re');
                $data['text_version_translate_re'] = $this->language->get('text_version_translate_re');
                $data['text_version_translate_re'] .= ' ' . $this->language->get('text_version_translate_number_re');
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                $data['text_version'] = '';
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                $data['text_version'] = $this->language->get('text_version_hidden');
                $data['text_version_re'] = $this->language->get('text_version_hidden_re');
                $data['text_version_translate_re'] = $this->language->get('text_version_translate_re');
                $data['text_version_translate_re'] .= ' ' . $this->language->get('text_version_translate_hidden_re');
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                return $this->load->view('common/footer', $data);
            ]]></search>
            <add position="before" trim="true"><![CDATA[
                $data['text_footer_link'] = $this->language->get('text_footer_link');
                $data['text_footer_year'] = $this->language->get('text_footer_year');
                $data['text_footer_copyright_icon'] = $this->language->get('text_footer_copyright_icon');
                $data['text_footer_copyright'] = $this->language->get('text_footer_copyright');

                // RE
                $data['text_footer_re'] = $this->language->get('text_footer_re');
                $data['text_footer_link_re'] = $this->language->get('text_footer_link_re');
                $data['text_footer_year_re'] = $this->language->get('text_footer_year_re');
                $data['text_version_link_re'] = $this->language->get('text_version_link_re');
                $data['text_version_translate_link_re'] = $this->language->get('text_version_translate_link_re');
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Изменение верстки шаблона для вывода ссылок на сайт проекта сборки -->
    <file path="admin/view/template/common/footer.twig">
        <operation>
            <search trim="true"><![CDATA[
                <footer id="footer">{{ text_footer }}<br />{{ text_version }}</footer></div>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                <footer id="footer">
                    <a href="{{ text_footer_link }}" target="_blank">{{ text_footer }}</a>
                    {{ text_footer_copyright_icon }} {{ text_footer_year }}-{{ "now"|date("Y") }}
                    {{ text_footer_copyright }}<br>
                    <a href="{{ text_footer_link_re }}" target="_blank">{{ text_footer_re }}</a>
                    {{ text_footer_copyright_icon }} {{ text_footer_year_re }}-{{ "now"|date("Y") }}
                    {{ text_footer_copyright }}<br>
                    {{ text_version }} |
                    <a href="{{ text_version_link_re }}" target="_blank">{{ text_version_re }}</a> |
                    <a href="{{ text_version_translate_link_re }}" target="_blank">{{ text_version_translate_re }}</a>
                </footer></div>
            ]]></add>
        </operation>
    </file>
    <!--  -->
<!--  -->

<!-- Комментируем рекламу из всех страниц расширений -->
    <file path="admin/controller/extension/extension/{analytics,captcha,dashboard,feed,fraud,menu,module,payment,report,shipping,theme,total}.php">
        <operation>
            <search trim="true"><![CDATA[
                $data['promotion'] = $this->load->controller('extension/extension/promotion');
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                // $data['promotion'] = $this->load->controller('extension/extension/promotion');
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/extension/extension/{analytics,captcha,dashboard,feed,fraud,menu,module,payment,report,shipping,theme,total}.twig">
        <operation>
            <search trim="true"><![CDATA[
                {{ promotion }}
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                {# {{ promotion }} #}
            ]]></add>
        </operation>
    </file>
<!--  -->

<!-- По умолчанию тип Расширения Модули -->
    <file path="admin/controller/common/column_left.php">
        <operation>
            <search trim="true"><![CDATA[
                'href'     => $this->url->link('marketplace/extension', 'user_token=' . $this->session->data['user_token'], true),
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                'href'     => $this->url->link('marketplace/extension', 'user_token=' . $this->session->data['user_token'] . '&type=module', true),
            ]]></add>
        </operation>
    </file>
<!--  -->

<!-- Вывод Настройки Разработчика в Модификациях -->
    <!-- Добавляем в языковые файлы фразы -->
    <file path="admin/language/en-gb/marketplace/modification.php">
        <operation>
            <search trim="true"><![CDATA[
                $_['text_list']         = 'Modification List';
            ]]></search>
            <add position="after" trim="true"><![CDATA[
                $_['text_developer']    = 'Developer Settings';
                $_['text_loading']      = 'Loading...';
            ]]></add>
        </operation>
    </file>
    <file path="admin/language/ru-ru/marketplace/modification.php">
        <operation>
            <search trim="true"><![CDATA[
                $_['text_list']         = 'Список модификаций';
            ]]></search>
            <add position="after" trim="true"><![CDATA[
                $_['text_developer']    = 'Настройки разработчика';
                $_['text_loading']      = 'Загрузка...';
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Добавляет кнопку в шаблон -->
    <file path="admin/view/template/marketplace/modification.twig">
        <operation>
            <search trim="true"><![CDATA[
                <div class="pull-right"><a href="{{ refresh }}" data-toggle="tooltip" title="{{ button_refresh }}" class="btn btn-info"><i class="fa fa-refresh"></i></a> <a href="{{ clear }}" data-toggle="tooltip" title="{{ button_clear }}" class="btn btn-warning"><i class="fa fa-eraser"></i></a>
            ]]></search>
            <add position="replace" trim="true"><![CDATA[
                <div class="pull-right"><button type="button" id="button-setting" data-toggle="tooltip" title="{{ text_developer }}" data-loading-text="{{ text_loading }}" class="btn btn-info"><i class="fa fa-cog"></i></button> <a href="{{ refresh }}" data-toggle="tooltip" title="{{ button_refresh }}" class="btn btn-info"><i class="fa fa-refresh"></i></a> <a href="{{ clear }}" data-toggle="tooltip" title="{{ button_clear }}" class="btn btn-warning"><i class="fa fa-eraser"></i></a>
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[
                {{ footer }}
            ]]></search>
            <add position="after" trim="true"><![CDATA[
                <script>
                    $('#button-setting').on('click', function() {
                        $.ajax({
                            url: 'index.php?route=common/developer&user_token={{ user_token }}',
                            dataType: 'html',
                            beforeSend: function() {
                                $('#button-setting').button('loading');
                            },
                            complete: function() {
                                $('#button-setting').button('reset');
                            },
                            success: function(html) {
                                $('#modal-developer').remove();

                                $('body').prepend('<div id="modal-developer" class="modal">' + html + '</div>');

                                $('#modal-developer').modal('show');
                            },
                            error: function(xhr, ajaxOptions, thrownError) {
                                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                            }
                        });
                    });
                    </script>
            ]]></add>
        </operation>
    </file>
    <!--  -->
<!--  -->

<!-- Вывод Обновления Кеша Модификаторов в Установщике -->
    <file path="admin/controller/marketplace/installer.php">
        <operation>
            <search><![CDATA[$data['user_token'] = $this->session->data['user_token'];]]></search>
            <add position="before" trim="true"><![CDATA[
                $url = '&installer=on';
                $data['refresh'] = $this->url->link('marketplace/modification/refresh', 'user_token=' . $this->session->data['user_token'] . $url, true);
                if (isset($this->session->data['success'])) {
                    $data['success'] = $this->session->data['success'];
                    unset($this->session->data['success']);
                }
            ]]></add>
        </operation>
    </file>

    <file path="admin/controller/marketplace/modification.php">
        <operation>
            <search><![CDATA[$this->getList();]]></search>
            <add position="replace" trim="true"><![CDATA[
                if (!isset($this->request->get['installer'])) {
                    $this->getList();
                }
            ]]></add>
        </operation>
        <operation>
            <search><![CDATA[$this->response->redirect($this->url->link(!empty($data['redirect']) ? $data['redirect'] : 'marketplace/modification', 'user_token=' . $this->session->data['user_token'] . $url, true));]]></search>
            <add position="replace" trim="true"><![CDATA[
                if (isset($this->request->get['installer']) && $this->request->get['installer'] === 'on') {
                    unset($this->session->data['success']);
                    $this->response->addHeader('Content-Type: application/json; charset=utf-8');
                    $this->response->setOutput(json_encode(['success' => $this->language->get('text_success')]));
                } else {
                    $this->response->redirect($this->url->link(!empty($data['redirect']) ? $data['redirect'] : 'marketplace/modification', 'user_token=' . $this->session->data['user_token'] . $url, true));
                }
            ]]></add>
        </operation>
    </file>

    <file path="admin/view/template/marketplace/installer.twig">
        <operation>
            <search><![CDATA[<h1>{{ heading_title }}</h1>]]></search>
            <add position="replace" trim="true"><![CDATA[
                <div class="pull-right">
                    <button data-toggle="tooltip" title="{{ button_refresh }}" class="btn btn-info" id="refreshAjax" data-url="{{ refresh }}"><i class="fa fa-refresh"></i></button>
                </div>
            ]]></add>
        </operation>
        <operation>
            <search><![CDATA[<div class="panel panel-default">]]></search>
            <add position="before" trim="true"><![CDATA[
                {% if success %}
                <div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> {{ success }}
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                </div>
                {% endif %}
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[{{ footer }}]]></search>
            <add position="before" trim="true"><![CDATA[
                <script>
                $('#refreshAjax').on('click', function () {
                    $('.alert').remove();

                    let buttonRefreshAjax = $('#refreshAjax');
                    const urlAjax = buttonRefreshAjax.attr('data-url');

                    $.ajax({
                    type: 'get',
                    url: urlAjax,
                    dataType: 'json',
                    beforeSend: function() {
                        buttonRefreshAjax.prop('disabled', true);
                        buttonRefreshAjax.find('i.fa').removeClass('fa-refresh').addClass('fa-spinner fa-pulse');
                    },
                    complete: function() {
                        buttonRefreshAjax.prop('disabled', false);
                        buttonRefreshAjax.find('i.fa').removeClass('fa-spinner fa-pulse').addClass('fa-refresh');
                    },
                    success: function(response) {
                        let alertMessage = response.success;

                        let alertBlock = '<div class="alert alert-success alert-dismissible"><i class="fa fa-exclamation-circle"></i>' + alertMessage + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>';
                        $('#content > .container-fluid').prepend(alertBlock);
                    },
                    error: function(xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                    });
                })
                </script>
            ]]></add>
        </operation>
    </file>
<!--  -->

<!-- Добавление наименования редактируемой позиции в каталоге -->
    <!-- Добавляет в категории -->
    <file path="admin/controller/catalog/category.php">
        <operation>
            <search trim="true"><![CDATA[$data['category_description'] = $this->model_catalog_category->getCategoryDescriptions($this->request->get['category_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['category_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в продукцию -->
    <file path="admin/controller/catalog/product.php">
        <operation>
            <search trim="true"><![CDATA[$data['product_description'] = $this->model_catalog_product->getProductDescriptions($this->request->get['product_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['product_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в регулярные профили -->
    <file path="admin/controller/catalog/recurring.php">
        <operation>
            <search trim="true"><![CDATA[$data['recurring_description'] = $this->model_catalog_recurring->getRecurringDescription($recurring_info['recurring_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['recurring_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в фильтры -->
    <file path="admin/controller/catalog/filter.php">
        <operation>
            <search trim="true"><![CDATA[$data['filter_group_description'] = $this->model_catalog_filter->getFilterGroupDescriptions($this->request->get['filter_group_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['filter_group_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в группу атрибутов -->
    <file path="admin/controller/catalog/attribute_group.php">
        <operation>
            <search trim="true"><![CDATA[$data['attribute_group_description'] = $this->model_catalog_attribute_group->getAttributeGroupDescriptions($this->request->get['attribute_group_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['attribute_group_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в атрибуты -->
    <file path="admin/controller/catalog/attribute.php">
        <operation>
            <search trim="true"><![CDATA[$data['attribute_description'] = $this->model_catalog_attribute->getAttributeDescriptions($this->request->get['attribute_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['attribute_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в опции -->
    <file path="admin/controller/catalog/option.php">
        <operation>
            <search trim="true"><![CDATA[$data['option_description'] = $this->model_catalog_option->getOptionDescriptions($this->request->get['option_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['option_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в производители -->
    <file path="admin/controller/catalog/manufacturer.php">
        <operation>
            <search trim="true"><![CDATA[$data['name'] = $manufacturer_info['name'];]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $manufacturer_info['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в загрузки -->
    <file path="admin/controller/catalog/download.php">
        <operation>
            <search trim="true"><![CDATA[$data['download_description'] = $this->model_catalog_download->getDownloadDescriptions($this->request->get['download_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['download_description'][$this->config->get('config_language_id')]['name']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в отзывы -->
    <file path="admin/controller/catalog/review.php">
        <operation>
            <search trim="true"><![CDATA[$data['product'] = $review_info['product'];]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $review_info['product']);
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[$data['author'] = $review_info['author'];]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(' (%s)', $review_info['author']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
    <!-- Добавляет в информацию -->
    <file path="admin/controller/catalog/information.php">
        <operation>
            <search trim="true"><![CDATA[$data['information_description'] = $this->model_catalog_information->getInformationDescriptions($this->request->get['information_id']);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['text_form'] .= sprintf(': %s', $data['information_description'][$this->config->get('config_language_id')]['title']);
            ]]></add>
        </operation>
    </file>
    <!--  -->
<!--  -->

<!-- Добавление кнопки вверх -->
    <file path="catalog/view/theme/default/template/common/footer.twig">
        <operation>
            <search><![CDATA[</footer>]]></search>
            <add position="after" trim="true"><![CDATA[
                <a class="ocn-arrow-up" id="ocn-arrow-up" href="#top"><i class="fa fa-angle-double-up fa-3x" aria-hidden="true"></i></a>
                <style>
                    .ocn-arrow-up {
                        position: fixed;
                        right: 10px;
                        bottom: 10px;
                        display: none;
                        z-index: 999;
                    }
                    .ocn-arrow-up > i.fa {
                        font-size: 50px;
                    }
                </style>
                <script>
                    $(document).ready(function() {
                        $(window).scroll(function() {
                            if ($(this).scrollTop() > 100) {
                                if ($('#ocn-arrow-up').is(':hidden')) {
                                    $('#ocn-arrow-up').css({opacity : 1}).fadeIn('slow');
                                }
                            } else { $('#ocn-arrow-up').stop(true, false).fadeOut('fast'); }
                        });
                        $('#ocn-arrow-up').click(function(e) {
                            e.preventDefault();
                            $('html, body').stop().animate({scrollTop : 0}, 300);
                        });
                    });
                </script>
            ]]></add>
        </operation>
    </file>
<!--  -->

<!-- Добавление ссылок для быстрого перехода на витрину магазина из админки -->
    <!-- Для категорий -->
    <file path="admin/controller/catalog/category.php">
        <operation>
            <search trim="true"><![CDATA['edit'        => $this->url->link('catalog/category/edit', 'user_token=' . $this->session->data['user_token'] . '&category_id=' . $result['category_id'] . $url, true),]]></search>
            <add position="before" trim="true"><![CDATA[
                'front'       => ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=product/category&path=' . $result['category_id'],
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[$data['action'] = $this->url->link('catalog/category/edit', 'user_token=' . $this->session->data['user_token'] . '&category_id=' . $this->request->get['category_id'] . $url, true);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['view'] = ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=product/category&path=' . $this->request->get['category_id'];
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/category_list.twig">
        <operation>
            <search trim="true"><![CDATA[<td class="text-right"><a href="{{ category.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>]]></search>
            <add position="replace" trim="true"><![CDATA[
                <td class="text-right"><a href="{{ category.front }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a> <a href="{{ category.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/category_form.twig">
        <operation>
            <search trim="true"><![CDATA[<button type="submit" form="form-category" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>]]></search>
            <add position="before" trim="true"><![CDATA[
                {% if view %}<a href="{{ view }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a>{% endif %}
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Для продукции -->
    <file path="admin/controller/catalog/product.php">
        <operation>
            <search trim="true"><![CDATA['edit'       => $this->url->link('catalog/product/edit', 'user_token=' . $this->session->data['user_token'] . '&product_id=' . $result['product_id'] . $url, true)]]></search>
            <add position="before" trim="true"><![CDATA[
                'front'      => ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=product/product&product_id=' . $result['product_id'],
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[$data['action'] = $this->url->link('catalog/product/edit', 'user_token=' . $this->session->data['user_token'] . '&product_id=' . $this->request->get['product_id'] . $url, true);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['view'] = ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=product/product&product_id=' . $this->request->get['product_id'];
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/product_list.twig">
        <operation>
            <search trim="true"><![CDATA[<td class="text-right"><a href="{{ product.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>]]></search>
            <add position="replace" trim="true"><![CDATA[
                <td class="text-right"><a href="{{ product.front }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a> <a href="{{ product.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/product_form.twig">
        <operation>
            <search trim="true"><![CDATA[<button type="submit" form="form-product" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>]]></search>
            <add position="before" trim="true"><![CDATA[
                {% if view %}<a href="{{ view }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a>{% endif %}
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Для Производителей -->
    <file path="admin/controller/catalog/manufacturer.php">
        <operation>
            <search trim="true"><![CDATA['edit'            => $this->url->link('catalog/manufacturer/edit', 'user_token=' . $this->session->data['user_token'] . '&manufacturer_id=' . $result['manufacturer_id'] . $url, true)]]></search>
            <add position="before" trim="true"><![CDATA[
                'front'            => ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=product/manufacturer/info&manufacturer_id=' . $result['manufacturer_id'],
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[$data['action'] = $this->url->link('catalog/manufacturer/edit', 'user_token=' . $this->session->data['user_token'] . '&manufacturer_id=' . $this->request->get['manufacturer_id'] . $url, true);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['view'] = ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=product/manufacturer/info&manufacturer_id=' . $this->request->get['manufacturer_id'];
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/manufacturer_list.twig">
        <operation>
            <search trim="true"><![CDATA[<td class="text-right"><a href="{{ manufacturer.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>]]></search>
            <add position="replace" trim="true"><![CDATA[
                <td class="text-right"><a href="{{ manufacturer.front }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a> <a href="{{ manufacturer.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/manufacturer_form.twig">
        <operation>
            <search trim="true"><![CDATA[<button type="submit" form="form-manufacturer" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>]]></search>
            <add position="before" trim="true"><![CDATA[
                {% if view %}<a href="{{ view }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a>{% endif %}
            ]]></add>
        </operation>
    </file>
    <!--  -->

    <!-- Для информации -->
    <file path="admin/controller/catalog/information.php">
        <operation>
            <search trim="true"><![CDATA['edit'           => $this->url->link('catalog/information/edit', 'user_token=' . $this->session->data['user_token'] . '&information_id=' . $result['information_id'] . $url, true)]]></search>
            <add position="before" trim="true"><![CDATA[
                'front'            => ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=information/information&information_id=' . $result['information_id'],
            ]]></add>
        </operation>
        <operation>
            <search trim="true"><![CDATA[$data['action'] = $this->url->link('catalog/information/edit', 'user_token=' . $this->session->data['user_token'] . '&information_id=' . $this->request->get['information_id'] . $url, true);]]></search>
            <add position="after" trim="true"><![CDATA[
                $data['view'] = ($this->config->get('config_secure') ? HTTPS_CATALOG : HTTP_CATALOG) . 'index.php?route=information/information&information_id=' . $this->request->get['information_id'];
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/information_list.twig">
        <operation>
            <search trim="true"><![CDATA[<td class="text-right"><a href="{{ information.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>]]></search>
            <add position="replace" trim="true"><![CDATA[
                <td class="text-right"><a href="{{ information.front }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a> <a href="{{ information.edit }}" data-toggle="tooltip" title="{{ button_edit }}" class="btn btn-primary"><i class="fa fa-pencil"></i></a></td>
            ]]></add>
        </operation>
    </file>
    <file path="admin/view/template/catalog/information_form.twig">
        <operation>
            <search trim="true"><![CDATA[<button type="submit" form="form-information" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>]]></search>
            <add position="before" trim="true"><![CDATA[
                {% if view %}<a href="{{ view }}" data-toggle="tooltip" title="{{ button_view }}" class="btn btn-info" target="_blank"><i class="fa fa-eye"></i></a>{% endif %}
            ]]></add>
        </operation>
    </file>
    <!--  -->
<!--  -->

<!-- Добавляем кнопку для скрытия меню в админке -->
    <file path="admin/view/template/common/header.twig">
        <operation>
          <search><![CDATA[<a href="#" id="button-menu" class="hidden-md hidden-lg"><span class="fa fa-bars"></span></a>{% if logged %}]]></search>
          <add position="replace"><![CDATA[
          <a href="#" id="button-menu"><span class="fa fa-bars"></span></a>{% if logged %}
          ]]></add>
        </operation>
        <operation>
          <search><![CDATA[</header>]]></search>
          <add position="after"><![CDATA[
<script>
$(window).on('load', function () {
  checkMenu();
  function checkMenu() {
    let menuStatus = Number(localStorage.getItem('button-menu'));
    if (menuStatus) {
      if (!$('#column-left').hasClass('active')) {
        $('#column-left').addClass('active');
      }
    } else {
      $('#column-left').removeClass('active');
    }
  }

  $('#button-menu').on('click', function(e) {
    e.preventDefault();
    if ($('#column-left').hasClass('active')) {
      localStorage.setItem('button-menu', 1);
    } else {
      localStorage.setItem('button-menu', 0);
    }
  });
});
</script>
          ]]></add>
        </operation>
        <operation>
            <search><![CDATA[<link type="text/css" href="view/stylesheet/stylesheet.css" rel="stylesheet" media="screen" />]]></search>
            <add position="after"><![CDATA[<link rel="stylesheet" href="view/stylesheet/ocn/menu-switch.css">]]></add>
        </operation>
    </file>
    <file path="admin/view/template/common/column_left.twig">
        <operation>
            <search><![CDATA[<nav id="column-left">]]></search>
            <add position="replace"><![CDATA[<nav id="column-left" class="active">]]></add>
        </operation>
    </file>
<!--  -->
</modification>
